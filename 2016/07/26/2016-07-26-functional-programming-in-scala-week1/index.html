<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content=""><meta name="keyword" content=""><link rel="shortcut icon" href="/img/favicon.ico"><title>Functional Programming in Scala week 1 - 보노의블로그 | Bono&#39;s Blog</title><link rel="canonical" href="http://blueshw.githup.io/2016/07/26/2016-07-26-functional-programming-in-scala-week1/"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/hux-blog.css"><link rel="stylesheet" href="/css/highlight.css"><link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--><script></script></head><body ontouchstart=""><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">보노의 블로그</a></div><div id="huxblog_navbar"><div class="navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/archives/">Archives</a></li><li><a href="/tags/">Tags</a></li></ul></div></div></div></nav><script>function handleMagic(e){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic)</script><style type="text/css">header.intro-header{background-image:url(/img/home-bg.jpg)}</style><header class="intro-header"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><div class="tags"><a class="tag" href="/tags/#scala" title="scala">scala</a> <a class="tag" href="/tags/#coursera" title="coursera">coursera</a></div><h1>Functional Programming in Scala week 1</h1><h2 class="subheading"></h2><span class="meta">Posted by bono on 2016-07-26</span></div></div></div></div></header><article><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"><h2 id="1-1-Programming-Paradigms"><a href="#1-1-Programming-Paradigms" class="headerlink" title="1.1 Programming Paradigms"></a>1.1 Programming Paradigms</h2><p>세 가지 프로그래밍 언어 패러다임</p><ul><li>Inperative Programming Language (절차지향 프로그래밍 언어)</li><li>Functional Programming Language (함수형 프로그래밍 언어)</li><li>Logical Programming Language (논리형 프로그래밍 언어)</li></ul><p>튜터는 OOP는 세가지 언어에 직교하는 성질을 가지고 있기 때문에 새로운 패러다임이라 할 수 없다고 생각함<br>절차적 프로그램은 폰 노이만 구조랑 비슷함<br>절차적 프로그램은 규모가 커졌을 경우 word by word로 처리되는 문제 때문에 폰 노이만처럼 병목현상이 발생할 수 있다.<br>그래서 collections, 다항식, strings 등과 같이 고수준의 추상화를 정의하는 진화된 다른 방법(theory)이 필요</p><h3 id="What-is-Theory"><a href="#What-is-Theory" class="headerlink" title="What is Theory?"></a>What is Theory?</h3><ul><li>one or more data types</li><li>operations on thes types</li><li>laws that describe the relationships between values and operations<br>즉, 여러개의 데이터 타입과 연산과 그 관계에 대한 규칙의 정의라 할 수 있다.</li></ul><p>절차적 언어는 함수나 특정 코드에 의해 상태값이 바뀔 수 있기 때문에 theory가 손상될수 있다. 이러한 문제를 해결하기 위해 함수형 언어가 등장하였다. 함수형 언어는 아래와 같은 특징을 가진다.</p><ul><li>concentrate on defining theories for operators expressed as functions</li><li>avoid mutations</li><li>have powerful ways to abstract and compose functions</li></ul><h2 id="1-2-Elements-of-Programming"><a href="#1-2-Elements-of-Programming" class="headerlink" title="1.2 Elements of Programming"></a>1.2 Elements of Programming</h2><ul><li>call by value : 인자가 먼저 평가되는 방식</li><li>call by name : 인자가 나중에 평가 되는 방식<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">sumOfSquares</span><span class="params">(<span class="number">3</span>, <span class="number">2</span>+<span class="number">2</span>)</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="title">sumOfSquares</span><span class="params">(<span class="number">3</span>, <span class="number">4</span>)</span></span> <span class="comment">// call by value</span></div><div class="line"><span class="function"><span class="title">sumOfSquares</span><span class="params">(<span class="number">3</span>, <span class="number">2</span>+<span class="number">2</span>)</span></span> <span class="comment">// call by name</span></div></pre></td></tr></table></figure></li></ul><p>위와 같은 함수가 있을때, 2+2가 먼저 계산되어 인자가 4로 evaluation 된 후 reduce 되면 call by value, 2+2가 이름(name) 그대로 reduce 되면 call by name이라 할 수 있다. call by value의 장점은 모든 함수의 인자가 한번만 해석된다는 것이다. 반면에 call by name has the advantage that a function argument is not evaluated if the corresponding parameter is unused in the evaluation of the function body.</p><p>다음의 예를 보면 이해가 간다.</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">call by name </div><div class="line">test(<span class="number">3</span>+<span class="number">4</span>,<span class="number">2</span>*<span class="number">4</span>)</div><div class="line"><span class="comment">// (3+4) * (3+4)</span></div><div class="line"><span class="comment">// 7 * (3+4)</span></div><div class="line"><span class="comment">// 7 * 7</span></div><div class="line"><span class="comment">// 49</span></div><div class="line"></div><div class="line">call by value</div><div class="line">test(<span class="number">3</span>+<span class="number">4</span>,<span class="number">2</span>*<span class="number">4</span>)</div><div class="line"><span class="comment">// test(7,2*4)</span></div><div class="line"><span class="comment">// test(7,8)</span></div><div class="line"><span class="comment">// 7 * 7</span></div><div class="line"><span class="comment">// 49</span></div></pre></td></tr></table></figure><h2 id="1-3-Evaluation-Strategies-and-Termination"><a href="#1-3-Evaluation-Strategies-and-Termination" class="headerlink" title="1.3 Evaluation Strategies and Termination"></a>1.3 Evaluation Strategies and Termination</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">first</span><span class="params">(<span class="symbol">x:</span> Int, <span class="symbol">y:</span> Int)</span></span> = x</div><div class="line">first(<span class="number">1</span>, loop)</div></pre></td></tr></table></figure><p>first 함수를 호출하게 되면 CBN같은 경우는 인자를 해석하지 않고 바로 1을 출력하겠지만, CBV인 경우에는 loop 인자를 해석하기 위해서 무한루프에 빠지게 된다.</p><ul><li>스칼라는 기본적으로 CBV를 사용</li><li>함수 파라미터가 =&gt;로 시작하면 CBN 사용</li></ul><h2 id="1-4-Conditionals-and-Value-Definitions"><a href="#1-4-Conditionals-and-Value-Definitions" class="headerlink" title="1.4 Conditionals and Value Definitions"></a>1.4 Conditionals and Value Definitions</h2><figure class="highlight flix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">loop</span></span>: Boolean = loop</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">x</span> </span>= loop </div><div class="line">val x = loop <span class="comment">// infinite loop</span></div></pre></td></tr></table></figure><p>def는 우측의 loop가 해석되지 않는다. 반면에 val(value)는 우측의 코드를 해석하기 때문에 위와 같은 코드의 경우 무한루프에 빠지게 된다.</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">and</span>(x,y) == x &amp;&amp; y</div><div class="line">def <span class="keyword">and</span>(x: <span class="built_in">Boolean</span>, y: <span class="built_in">Boolean</span>)</div><div class="line">  <span class="keyword">if</span> (x) y <span class="keyword">else</span> <span class="literal">false</span></div><div class="line">// <span class="keyword">and</span>(x, <span class="keyword">loop</span>)와 같은 문제가 발생할 수 있으므로, 아래와 같이 변경</div><div class="line">def <span class="keyword">and</span>(x: <span class="built_in">Boolean</span>, y: =&gt; <span class="built_in">Boolean</span>)</div><div class="line">  <span class="keyword">if</span> (x) y <span class="keyword">else</span> <span class="literal">false</span></div><div class="line">```  </div><div class="line">&gt; 그런데 왜 y만 CBN으로 변경해 줬을까? <span class="keyword">and</span>(<span class="keyword">loop</span>, b)하면 어떻게될까?</div><div class="line"></div><div class="line"></div><div class="line">## <span class="number">1.5</span> Example: square roots <span class="keyword">with</span> Newton<span class="symbol">'s</span> method</div><div class="line"></div><div class="line">뉴튼 메소드를 이용해서 제곱근을 구하는 예제를 작성해본다.</div><div class="line"></div><div class="line">&gt; 한가지 주의할점은 스칼라에서 recursive(재귀) 함수인 경우에는 반드시 <span class="keyword">return</span> 타입을 정해주어야 한다.</div></pre></td></tr></table></figure><p>def abs(x: Double) = if (x &lt; 0) -x else x</p><p>def sqrtIter(guess: Double, x: Double): Double =<br>if (isGoodEnough(guess, x)) guess<br>else sqrtIter(improve(guess, x), x)</p><p>def isGoodEnough(guess: Double, x: Double) =<br>abs(guess * guess - x) / x &lt; 0.001</p><p>def improve(guess: Double, x: Double) =<br>(guess + x / guess) / 2</p><p>def sqrt(x: Double) = sqrtIter(1.0, x)</p><p>sqrt(2) // res1: Double = 1.4142156862745097<br></p><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="armasm">## <span class="number">1</span>.<span class="number">6</span> <span class="keyword">Bolcks </span><span class="keyword">and </span>Lexical Scope</span></div><div class="line"></div><div class="line"><span class="keyword">block을 </span>잘 이용하면 불필요한 인자값을 호출하는 메서드에 넘길 필요가 없다.</div></pre></td></tr></table></figure><p></p><p>def abs(x: Double) = if (x &lt; 0) -x else x</p><p>def sqrt(x: Double) = {<br>def sqrtIter(guess: Double): Double =<br>if (isGoodEnough(guess)) guess<br>else sqrtIter(improve(guess))</p><p>def isGoodEnough(guess: Double) =<br>abs(guess * guess - x) / x &lt; 0.001</p><p>def improve(guess: Double) =<br>(guess + x / guess) / 2</p><p>sqrtIter(1.0)<br>}</p><p>sqrt(2) // 동일한 결과값<br></p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">위의 예제를 보면, sqrt(<span class="keyword">x</span>)에서 호출된 이후 내부적으로 sqrIter, isGoodEnough, improve를 호출하는데 모두 <span class="keyword">x</span> 파라미터를 인자값으로 전달해준다. <span class="keyword">x</span> 파라미터는 각 함수에서 불변하는 값이므로 위 세함수를 sqrt 함수의 내부함수로 재작성 한뒤 블록으로 감싸주면 <span class="keyword">x</span> 파라미터는 블록 범위내에서 동일하게 적용되는 값이 되므로 각 함수에서 파라미터를 제거할 수 있다.</div><div class="line"></div><div class="line">### 세미콜론 문제</div><div class="line">스칼라에서 세미콜론은 optional</div><div class="line">그래서 아래와 같은 코드가 작성되면 한 줄로 인식되어야 할 코드를 스칼라 인터프리터가 두줄로 인식해버리는 문제가 있다.</div></pre></td></tr></table></figure><p></p><p>someLongExpression</p><ul><li>someOtherExpression<figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">해결 방법은 두가지가 있는데, 첫째는 괄호로 묶어주는 방법이고 두번째는 <span class="string">'+'</span> 기호를 윗줄의 끝에 기입해주는 방법이다<span class="comment">(아직 문장이 안끝났다는 표시)</span>.</div></pre></td></tr></table></figure></li></ul><p>// solution 1<br>(someLongExpression</p><ul><li>someOtherExpression)</li></ul><p>// solution 2<br>someLongExpression +<br>someOtherExpression<br></p><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="clean">## <span class="number">1.7</span> Tail Recursion</span></div></pre></td></tr></table></figure><p></p><p>def gcd(x: Int, y: Int): Int =<br>if (y == 0) x else gcd(y, x % y)</p><p>def factorial(n: Int): Long =<br>if (n == 0) 1 else n * factorial(n-1)</p><p>// 강의와 조금 다름<br>def fac_tail_recursive(n: Int): Int = {<br>def loop(r: Int, i: Int): Int =<br>if (n == i) r<em>i<br>else<br>loop(r</em>i, i+1)<br>loop(1, 1)<br>}<br>```<br>gcd 함수의 계산과정을 살펴보면, gcd 함수 자체가 다시 불리는 형태로 진행한다. 반면에 fatorial 함수는 4 <em>3 </em>factorial(2)와 같이 계속해서 길어지므로, 저장해야 할 지역변수가 늘어나 stack frame을 재사용할 수 없다. 그래서 factorial을 fac_tail_recursive 함수처럼 함수 자신이 마지막으로 호출되는 형태로 변경해줄 필요가있다. 이를 Tail Recursion이라 부른다.</p><hr><ul class="pager"><li class="previous"><a href="/2016/07/26/2016-07-26-functional-programming-in-scala-week2/" data-toggle="tooltip" data-placement="top" title="Functional Programming in Scala week 2">&larr; Previous Post</a></li><li class="next"><a href="/2016/03/08/django-extend-view-using-mixin/" data-toggle="tooltip" data-placement="top" title="[django] Mixin을 이용한 View 확장하기">Next Post &rarr;</a></li></ul><div class="comment"><div id="disqus_thread" class="disqus-thread"></div></div></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"><section><h5><a href="/tags/">FEATURED TAGS</a></h5><div class="tags"><a class="tag" href="/tags/#scala" title="scala">scala</a> <a class="tag" href="/tags/#coursera" title="coursera">coursera</a></div></section></div></div></div></article><script type="text/javascript">var disqus_shortname="bonogithub",disqus_identifier="http://blueshw.githup.io/2016/07/26/2016-07-26-functional-programming-in-scala-week1/",disqus_url="http://blueshw.githup.io/2016/07/26/2016-07-26-functional-programming-in-scala-week1/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script>function async(e,n){var t=document,a="script",r=t.createElement(a),c=t.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),c.parentNode.insertBefore(r,c)}</script><script>async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){anchors.options={visible:"always",placement:"right",icon:"#"},anchors.add().remove(".intro-header h1").remove(".subheading").remove(".sidebar-container h5")})</script><style>@media all and (min-width:800px){.anchorjs-link{position:absolute;left:-.75em;font-size:1.1em;margin-top:-.1em}}</style><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a target="_blank" href="https://www.facebook.com/blueshw"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" href="https://github.com/blueshw"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; 보노의 블로그 2017<br>Theme by <a href="http://huangxuan.me">Hux</a> <span style="display:inline-block;margin:0 5px"><i class="fa fa-heart"></i> </span>Ported by <a href="http://blog.kaijun.rocks">Kaijun</a> |<iframe style="margin-left:2px;margin-bottom:-5px" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true"></iframe></p></div></div></div></footer><script src="/js/jquery.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/hux-blog.min.js"></script><script>function async(e,n){var t=document,a="script",r=t.createElement(a),c=t.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),c.parentNode.insertBefore(r,c)}</script><script>0!==$("#tag_cloud").length&&async("http://blueshw.githup.io/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js",function(){var c=document.querySelector("nav");c&&FastClick.attach(c)})</script><script>var _gaId="UA-50048807-2",_gaDomain="blueshw.github.io";!function(e,a,n,t,g,o,c){e.GoogleAnalyticsObject=g,e[g]=e[g]||function(){(e[g].q=e[g].q||[]).push(arguments)},e[g].l=1*new Date,o=a.createElement(n),c=a.getElementsByTagName(n)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(o,c)}(window,document,"script",0,"ga"),ga("create",_gaId,_gaDomain),ga("send","pageview")</script><img src="http://blueshw.githup.io/img/icon_wechat.png" width="0" height="0"></body></html>