<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content=""><meta name="keyword" content=""><link rel="shortcut icon" href="/img/favicon.ico"><title>[coursera] AngularJS week 2-1 - 보노의블로그 | Bono&#39;s Blog</title><link rel="canonical" href="http://blueshw.githup.io/2016/08/25/2016-08-25-frontend-javascript-framework-angularjs-week2-1/"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/hux-blog.css"><link rel="stylesheet" href="/css/highlight.css"><link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--><script></script></head><body ontouchstart=""><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">보노의 블로그</a></div><div id="huxblog_navbar"><div class="navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/archives/">Archives</a></li><li><a href="/tags/">Tags</a></li></ul></div></div></div></nav><script>function handleMagic(e){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic)</script><style type="text/css">header.intro-header{background-image:url(/img/home-bg.jpg)}</style><header class="intro-header"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><div class="tags"><a class="tag" href="/tags/#coursera" title="coursera">coursera</a> <a class="tag" href="/tags/#angularjs" title="angularjs">angularjs</a> <a class="tag" href="/tags/#javascript" title="javascript">javascript</a></div><h1>[coursera] AngularJS week 2-1</h1><h2 class="subheading"></h2><span class="meta">Posted by bono on 2016-08-25</span></div></div></div></div></header><article><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"><h2 id="Task-Runners-Angular-Scope-Forms-and-Form-Validation-1"><a href="#Task-Runners-Angular-Scope-Forms-and-Form-Validation-1" class="headerlink" title="Task Runners, Angular Scope, Forms and Form Validation-1"></a>Task Runners, Angular Scope, Forms and Form Validation-1</h2><h3 id="Web-Tools-Grunt-and-Gulp"><a href="#Web-Tools-Grunt-and-Gulp" class="headerlink" title="Web Tools: Grunt and Gulp"></a>Web Tools: Grunt and Gulp</h3><h4 id="Task-Runners"><a href="#Task-Runners" class="headerlink" title="Task-Runners"></a>Task-Runners</h4><p>웹개발을 하다보면 반복적으로 처리해야하는 태스크가 많이 있다. DRY(do not repeat yourself) 원칙에 따라 태스크를 자동화하기 빌드툴을 사용할 필요가 있다.</p><p>CSS에서 보면 Sass나 Less로 컴파일하거나, 어떤 vender prefixes를 추가하거나 Minification(spaces, newlines, comments 등의 불필요한 캐릭터 삭제)하거나 Concatenation 등의 반복적이 Tasks가 있다.</p><p>Javascript의 경우에는, JSHint를 이용한 자바스크립트 에러체킹이나 Concatenation, Uglification(minification + mangling(변수명 char 하나로 줄이기)) 등이 있겠다.</p><p>이 외에도 Image 용량 최적화, 태스크 rerunning, 변경된 사항 반영하기 위한 server and Livereload, 파일 변경, 테스팅 등의 반복적인 태스크가 있다.</p><p>위에서 살펴본 반복적인 태스크를 Grunt, Gulp 등의 Task Runners를 이용해 자동화 할 수 있다.</p><h3 id="Grunt"><a href="#Grunt" class="headerlink" title="Grunt"></a>Grunt</h3><p>Grunt는 configuration 기반의 태스크 러너이다. 우선 install 하자. -g 옵션을 주어 global하게 사용할 수 있도록 한다.</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g grunt-<span class="keyword">cli</span></div></pre></td></tr></table></figure><p>Grunt의 설정팔일은 Gruntfile.js로 정의한다. 대략적인 구조를 살펴보면 아래와 같다.<br>function의 argument에 grunt 객체가 들어가고 그 아래에 필요한 코드를 추가한다. 자세한 내용은 차차 알아보자.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">grunt</span>) </span>&#123;</div><div class="line">	<span class="comment">// do requires here</span></div><div class="line">	<span class="built_in">require</span>(<span class="string">'jit-grunt'</span>)(grunt);</div><div class="line"></div><div class="line">	<span class="comment">// do grunt task configurations here</span></div><div class="line">	grunt.initConfig(&#123;</div><div class="line"></div><div class="line">	&#125;);</div><div class="line"></div><div class="line">	<span class="comment">// register tasks here</span></div><div class="line">	grunt.registerTask(<span class="string">'build'</span>, [<span class="string">'jshint'</span>]);</div><div class="line">	grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'build'</span>]);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="File-Globbing-Patterns"><a href="#File-Globbing-Patterns" class="headerlink" title="File Globbing Patterns"></a>File Globbing Patterns</h4><p>Grunt는 File Globbing Patterns를 사용한다. File Globbing Patterns이란 다음의 내용을 말한다.</p><ul><li>* 문자열, but not /</li><li>? 문자 하나, but not /</li><li>** 문자열 including /</li><li>{} comma로 or 를 표현함</li><li>! 패턴매치가 negative함</li></ul><p>몇가지 예제를 살펴보자<br>우선 jshint와 jshint-stylish 모듈을 install 한다.<br>jshint는 자바스크립트의 문법을 체크해주는 모듈이다. 세미콜론이 빠졌거나, 괄호가 빠져 있는것 처럼 문법오류나 개선할 부분이 필요한 것을 체크해준다. jshint-stylish는 jshint의 메세지를 좀 더 잘 보여주기 위한 스타일을 제공하는 모듈이다.</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install </span>grunt-contrib-<span class="keyword">jshint </span>--save-dev</div><div class="line">npm <span class="keyword">install </span><span class="keyword">jshint-stylish </span>--save-dev</div></pre></td></tr></table></figure><p>그리고 Configuration을 다음과 같이 작성하자.<br>Configuration 파일은 프로젝트 root 폴더에서 Gruntfile.js를 만들어 아래 내용을 저장한다.</p><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">jshint</span>: &#123;</div><div class="line">	<span class="attribute">options</span>: &#123;</div><div class="line">		<span class="attribute">jshintrc</span>: <span class="string">'.jshintrc'</span>,</div><div class="line">		<span class="attribute">reporter</span>: require(<span class="string">'jshint-stylish'</span>)</div><div class="line">	&#125;,</div><div class="line">	<span class="attribute">all</span>: &#123;</div><div class="line">		<span class="comment">// 실제 체크할 자바스크립트 파일의 경로를 지정한다.</span></div><div class="line">		<span class="comment">// Gruntfile.js와 app/scripts의 모든 .js 파일을 검사하겠다는 의미다.</span></div><div class="line">		<span class="attribute">src</span>: [<span class="string">'Gruntfile.js'</span>, <span class="string">'app/scripts/&#123;,*/&#125;*.js'</span>]</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>설정파일은 자바스크립트 객체 형식으로 구성된다. options는 jshint 설정파일과 그외 포맷을 위한 style 모듈이 reporter로 정의되어 있다. hshintrc는 jshint 설정파일이다. all 부분은 jshint를 적용할 자바스크트 파일을 Globbing 패턴으로 지정하였다.</p><h4 id="Greating-a-Distribution-Folder"><a href="#Greating-a-Distribution-Folder" class="headerlink" title="Greating a Distribution Folder"></a>Greating a Distribution Folder</h4><p>수많은 Grunt관련 모듈과 css, js 파일들을 설치함으로써 프로젝트 구성이 점점 복잡해지고 있다. 그래서 Distribution Folder를 만들어 꼭 필요한 모듈만 이용하는 웹사이트를 만들어 보자.</p><p>다음의 모듈을 설치한다.<br>global(-g) 옵션이 없는 설치는 local 설치이므로 모듈을 사용할 프로젝트 디렉토리에서 실행한다.</p><h4 id="usemin-module"><a href="#usemin-module" class="headerlink" title="usemin module"></a>usemin module</h4><figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 조건에 맞는 모든 파일을 원하는 폴더(여기서는 dist)로 복사한다.</span></div><div class="line">npm install grunt-contrib-copy --<span class="built_in">save</span>-<span class="built_in">dev</span></div><div class="line"></div><div class="line"><span class="comment">// 해당 폴더의 clean out 한다. rebuild를 위한 초반 작업이다. 그렇기 때문에 가장 먼저 실행해야한다.</span></div><div class="line">npm install grunt-contrib-clean --<span class="built_in">save</span>-<span class="built_in">dev</span></div><div class="line"></div><div class="line"><span class="comment">// js, css 파일들을 하나로 합쳐준다.</span></div><div class="line">npm install grunt-contrib-concat --<span class="built_in">save</span>-<span class="built_in">dev</span></div><div class="line"></div><div class="line"><span class="comment">// css 파일 minification</span></div><div class="line">npm install grunt-contrib-cssmin --<span class="built_in">save</span>-<span class="built_in">dev</span></div><div class="line"></div><div class="line"><span class="comment">// 자바스크립트 변수를 문자열 =&gt; 문자로 변경한다.</span></div><div class="line">npm install grunt-contrib-uglify --<span class="built_in">save</span>-<span class="built_in">dev</span></div><div class="line"></div><div class="line"><span class="comment">// minification한 뒤, css, js 파일을 버전업한다. (브라우저 캐싱 대비)</span></div><div class="line"><span class="comment">// 해싱 알고리즘과 length등을 선택할 수 있다.</span></div><div class="line">npm insatll grunt-filerev --<span class="built_in">save</span>-<span class="built_in">dev</span></div><div class="line"></div><div class="line"><span class="comment">// css, js 파일을 minification 해준다.</span></div><div class="line"><span class="comment">// useminPrepare -&gt; concat -&gt; cssmin -&gt; uglify -&gt; filerev -&gt; usemin의 순서로 태스크가 진행된다. </span></div><div class="line">npm insatll grunt-usemin --<span class="built_in">save</span>-<span class="built_in">dev</span></div></pre></td></tr></table></figure><p>usemin은 js, css 파이릉 minification 하기 위한 모듈이다. usemin은 독자적으로 동작하지 않고 여러가지 모듈을 거쳐가는데 대체로 다음과 같다.</p><blockquote><p>useminPrepare -&gt; concat -&gt; cssmin -&gt; uglify -&gt; filerev -&gt; usemin</p></blockquote><p>우선 useminPrepare는 html 주석 처리된 부분을 기준으로 css, js 각각의 하나의 파일로 합치기 위한 준비를 한다. concat을 통해 css, js 파일들을 각각 하나로 합쳐준다. 그리고 cssmin, uglify 모듈을 통해 css, js 파일을 minification 하고 filerev로 버전관리를 한다. 마지막으로 usemin이 html 파일에 이전의 모든 모듈이 행한 결과를 반영한다.</p><h4 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h4><p>original 파일의 변경이 발생하였을때 rerun하기 위한 모듈이다.<br>설정된 모든 파일중에 하나라도 변경이 일어나면 즉시 reload한다.<br>reload는 모든 파일들을 복사하는것과 같다고 보면 된다.<br>그런데, js, css 파일들은 copy를 예외처리하는데, usemin 모듈에서 먼저 빌드처리 되기 때문에 watch에서는 제외된다.</p><figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install grunt-contrib-watch --<span class="built_in">save</span>-<span class="built_in">dev</span></div></pre></td></tr></table></figure><h4 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h4><p>브라우저에서 dist 폴더의 특정 html 파일(보통 index.html)이 실행되도록 한다.<br>watch 모듈과 같이 사용하면 이렇게 사용할 수 있다.</p><blockquote><p>파일 변경 -&gt; livereload (build and copy) -&gt; open(update) browse</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> grunt-contlib-<span class="keyword">connect</span> <span class="comment">--save-dev</span></div></pre></td></tr></table></figure><h4 id="Gruntfile-js"><a href="#Gruntfile-js" class="headerlink" title="Gruntfile.js"></a>Gruntfile.js</h4><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div></pre></td><td class="code"><pre><div class="line"><span class="string">'use strict'</span>;</div><div class="line"></div><div class="line">module.exports = <span class="keyword">function</span> (grunt) &#123;</div><div class="line"></div><div class="line">	require(<span class="string">'time-grunt'</span>)(grunt);</div><div class="line">	require(<span class="string">'jit-grunt'</span>)(grunt, &#123;</div><div class="line">		useminPrepare: <span class="string">'grunt-usemin'</span></div><div class="line">	&#125;);</div><div class="line"></div><div class="line">	grunt.initConfig(&#123;</div><div class="line">		pkg: grunt.file.readJSON(<span class="string">'package.json'</span>),</div><div class="line">		jshint: &#123;</div><div class="line">			options: &#123;</div><div class="line">				jshintrc: <span class="string">'.jshintrc'</span>,</div><div class="line">				reporter: require(<span class="string">'jshint-stylish'</span>)</div><div class="line">			&#125;,</div><div class="line">			all: &#123;</div><div class="line">				src: [</div><div class="line">					<span class="string">'Gruntfile.js'</span>,</div><div class="line">					<span class="string">'app/scripts/&#123;,*/&#125;*.js'</span></div><div class="line">				]</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line">		useminPrepare: &#123;</div><div class="line">			html: <span class="string">'app/menu.html'</span>,</div><div class="line">			options: &#123;</div><div class="line">				dest: <span class="string">'dist'</span></div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line">		concat: &#123;</div><div class="line">			options: &#123;</div><div class="line">				separator: <span class="string">';'</span></div><div class="line">			&#125;,</div><div class="line">			dist: &#123;&#125;</div><div class="line">		&#125;,</div><div class="line">		uglify: &#123;</div><div class="line">			dist: &#123;&#125;</div><div class="line">		&#125;,</div><div class="line">		cssmin: &#123;</div><div class="line">			dist: &#123;&#125;</div><div class="line">		&#125;,</div><div class="line">		filerev: &#123;</div><div class="line">			options: &#123;</div><div class="line">				encoding: <span class="string">'utf8'</span>,</div><div class="line">				algorithm: <span class="string">'md5'</span>,</div><div class="line">				length: <span class="number">20</span></div><div class="line">			&#125;,</div><div class="line">			release: &#123;</div><div class="line">				files: [&#123;</div><div class="line">					src: [</div><div class="line">						<span class="string">'dist/scripts/*js'</span>,</div><div class="line">						<span class="string">'dist/styles/*.css'</span></div><div class="line">					]</div><div class="line">				&#125;]</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line">		usemin: &#123;</div><div class="line">			html: [<span class="string">'dist/*.html'</span>],</div><div class="line">			css: [<span class="string">'dist/styles/*.css'</span>],</div><div class="line">			options: &#123;</div><div class="line">				assetsDirs: [<span class="string">'dist'</span>, <span class="string">'dist/styles'</span>]</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line"></div><div class="line">		copy: &#123;</div><div class="line">			dist: &#123;</div><div class="line">				cwd: <span class="string">'app'</span>,</div><div class="line">				src: [<span class="string">'**'</span>, <span class="string">'!styles/**/*.css'</span>, <span class="string">'!scripts/**/*.js'</span>],</div><div class="line">				dest: <span class="string">'dist'</span>,</div><div class="line">				expand: true</div><div class="line">			&#125;,</div><div class="line">			fonts: &#123;</div><div class="line">				files:[</div><div class="line">					&#123;</div><div class="line">						expand: true,</div><div class="line">						dot: true,</div><div class="line">						cwd: <span class="string">'bower_components/bootstrap/dist'</span>,</div><div class="line">						src: [<span class="string">'fonts/*.*'</span>],</div><div class="line">						dest: <span class="string">'dist'</span></div><div class="line">					&#125;, &#123;</div><div class="line">						expand: true,</div><div class="line">						dot: true,</div><div class="line">						cwd: <span class="string">'bower_components/font-awesome'</span>,</div><div class="line">						src: [<span class="string">'fonts/*.*'</span>],</div><div class="line">						dest: <span class="string">'dist'</span></div><div class="line">					&#125;</div><div class="line">				]</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line">		watch: &#123;</div><div class="line">			copy: &#123;</div><div class="line">				files: [<span class="string">'app/**'</span>, <span class="string">'!app/**/*.css'</span>, <span class="string">'!app/**/*.js'</span>],</div><div class="line">				tasks: [<span class="string">'build'</span>]</div><div class="line">			&#125;,</div><div class="line">			scripts: &#123;</div><div class="line">				files: [<span class="string">'app/scripts/app.js'</span>],</div><div class="line">				tasks: [<span class="string">'build'</span>]</div><div class="line">			&#125;,</div><div class="line">			styles: &#123;</div><div class="line">				files: [<span class="string">'app/styles/mystyles.css'</span>],</div><div class="line">				tasks:[<span class="string">'build'</span>]</div><div class="line">			&#125;,</div><div class="line">			livereload: &#123;</div><div class="line">				options: &#123;</div><div class="line">					livereload: <span class="string">'&lt;%= connect.options.livereload %&gt;'</span></div><div class="line">				&#125;,</div><div class="line">				files: [</div><div class="line">					<span class="string">'app/&#123;,*/&#125;*.html'</span>,</div><div class="line">					<span class="string">'.tmp/styles/&#123;,*/&#125;*.css'</span>,</div><div class="line">					<span class="string">'app/images/&#123;,*/&#125;*.&#123;png,jpg,jpeg,gif,webp,svg&#125;'</span></div><div class="line">				]</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line">		connect: &#123;</div><div class="line">			options: &#123;</div><div class="line">				port: <span class="number">9000</span>,</div><div class="line">				hostname: <span class="string">'localhost'</span>,</div><div class="line">				livereload: <span class="number">35729</span></div><div class="line">			&#125;,</div><div class="line">			dist: &#123;</div><div class="line">				options: &#123;</div><div class="line">					open: true, </div><div class="line">					base: &#123;</div><div class="line">						path: <span class="string">'dist'</span>,</div><div class="line">						options: &#123;</div><div class="line">							index: <span class="string">'menu.html'</span>,</div><div class="line">							maxAge: <span class="number">300000</span></div><div class="line">						&#125;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line">		clean: &#123;</div><div class="line">			build: &#123;</div><div class="line">				src: [<span class="string">'dist/'</span>]</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;);</div><div class="line"></div><div class="line">	// 태스크 등록</div><div class="line">	// 순서가 중요하다.</div><div class="line">	// jshint로 모든 .js 파일을 검사하게 된다.</div><div class="line">	grunt.registerTask(<span class="string">'build'</span>, [</div><div class="line">		<span class="string">'clean'</span>,</div><div class="line">		<span class="string">'jshint'</span>,</div><div class="line">		<span class="string">'useminPrepare'</span>,</div><div class="line">		<span class="string">'concat'</span>,</div><div class="line">		<span class="string">'cssmin'</span>,</div><div class="line">		<span class="string">'uglify'</span>,</div><div class="line">		<span class="string">'copy'</span>,</div><div class="line">		<span class="string">'filerev'</span>,</div><div class="line">		<span class="string">'usemin'</span></div><div class="line">	]);</div><div class="line"></div><div class="line">	// 순서가 중요하다. 먼저 build, 다음에는 브라우져 오픈, watch</div><div class="line">	// watch가 마지막에 실행되므로, 파일 변경을 감지하면 build, 브라우저 오픈, 다시 watch 와 같은 순서로 진행된다.</div><div class="line">	grunt.registerTask(<span class="string">'serve'</span>, [<span class="string">'build'</span>,<span class="string">'connect:dist'</span>,<span class="string">'watch'</span>]);</div><div class="line">	grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'build'</span>]);</div><div class="line">&#125;;</div></pre></td></tr></table></figure><h3 id="Gulp"><a href="#Gulp" class="headerlink" title="Gulp"></a>Gulp</h3><p>Grunt는 Configuration기반의 태스크 러너였다면, 반대로 Gulp는 코드 기반의 태스크 러너 이다. Gulp는 Grunt 처럼 태스크를 실행하기 위한 중간 파일을 만들지 않고 NodeJS streams을 사용하여 복잡한 파이프라인 형태로 실행된다(무슨 말이지는 잘 모르겠지만, 예제를 보면 알겠지).</p><p>일단 global로 설치하자.</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> -g gulp</div></pre></td></tr></table></figure><p>Grunt 예제와 비슷하게 동작하는 예제를 실행하기 위해 다음과 같은 plugins 을 설치한다.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> </div><div class="line">	gulp-jshint jshint-stylish</div><div class="line">	gulp-imagemin gulp-<span class="keyword">concat</span> gulp-uglify gulp-minify-css gulp-usemin</div><div class="line">	gulp-<span class="keyword">cache</span> gulp-rev gulp-<span class="keyword">rename</span> gulp-notify</div><div class="line">	browser-<span class="keyword">sync</span> del</div><div class="line"><span class="comment">--save-dev</span></div></pre></td></tr></table></figure><p>플러그인을 로드하는 방법은 다음과 같다.<br>직접 각 플러그인을 로드해도 되지만, package.json 파일 형태로 저장할 수도 있다.</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> gulp = <span class="keyword">require</span>(<span class="string">'gulp'</span>),</div><div class="line">  jshint = <span class="keyword">require</span>(<span class="string">'gulp-jshint'</span>)</div><div class="line">  sylish = <span class="keyword">require</span>(<span class="string">'jshint-stylish'</span>)</div><div class="line">  </div><div class="line">  <span class="params">...</span></div></pre></td></tr></table></figure><h4 id="Gulp-Streams"><a href="#Gulp-Streams" class="headerlink" title="Gulp Streams"></a>Gulp Streams</h4><p>Gulp Streams는 nodeJS streams를 사용하여 파이프라인을 구성하는데, 파이프 라인이란 하나의 function의 결과가 다음 function으로 그대로 전달되는 연쇄적인 명령셋을 말한다. 예제를 살펴보자</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'jshint'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">	gulp.src(<span class="string">'app/scripts/**/*.js'</span>)</div><div class="line">	.pipe(jshint())</div><div class="line">	.pipe(jshint.reporter(stylish));</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>우선 걸프 태스크를 생성하고 그 안에서 소스를 선택하고 jshint를 생성하고 스타일을 적용해주는 일련의 명령들을 pipe라는 function을 이용하여 연결하였다.</p><p>Watch 태스크 예제를 살펴보자</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'watch'</span>, [<span class="string">'browser-sync'</span>], <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">	gulp.watch(<span class="string">'&#123;app/scripts/**/*.js, app/style/**/*.css, app/**/*.html&#125;'</span>, [<span class="string">'usemin'</span>]);</div><div class="line">	gulp.watch(<span class="string">'app/images/**/*'</span>, [<span class="string">'imagemin'</span>]);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>태스크의 두번째 인자를 보면, browser-sync가 대괄호로 묶여져 있다. 이 의미는 browser-sync는 watch 태스크에 종속적이라는 말이다. 즉, watch 태스크가 실행되면 자동으로 browser-sync가 실행된다.</p><h4 id="Default-Task"><a href="#Default-Task" class="headerlink" title="Default Task"></a>Default Task</h4><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'clean'</span>], <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">	gulp.start(<span class="string">'usemin'</span>, <span class="string">'imagemin'</span>, <span class="string">'copyfonts'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>default 태스크는 콘솔창에서 gulp 라고 입력하면 실행되는 태스크이다. clean 태스크가 연쇄적으로 발생하게 되고, 내부에서는 서로 dependency가 없는 usemin, imagemin, copyfonts가 동시에 실행된다.</p><h4 id="gulpfile-js"><a href="#gulpfile-js" class="headerlink" title="gulpfile.js"></a>gulpfile.js</h4><p>콤마(,)와 띄어쓰기에 유의해야 한다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">	minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>),</div><div class="line">	jshint = <span class="built_in">require</span>(<span class="string">'gulp-jshint'</span>),</div><div class="line">	stylish = <span class="built_in">require</span>(<span class="string">'jshint-stylish'</span>),</div><div class="line">	uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>),</div><div class="line">	usemin = <span class="built_in">require</span>(<span class="string">'gulp-usemin'</span>),</div><div class="line">	imagemin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>),</div><div class="line">	rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>),</div><div class="line">	concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>),</div><div class="line">	notify = <span class="built_in">require</span>(<span class="string">'gulp-notify'</span>),</div><div class="line">	cache = <span class="built_in">require</span>(<span class="string">'gulp-cache'</span>),</div><div class="line">	changed = <span class="built_in">require</span>(<span class="string">'gulp-changed'</span>),</div><div class="line">	rev = <span class="built_in">require</span>(<span class="string">'gulp-rev'</span>),</div><div class="line">	browserSync = <span class="built_in">require</span>(<span class="string">'browser-sync'</span>),</div><div class="line">	del = <span class="built_in">require</span>(<span class="string">'del'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'jshint'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> gulp.src(<span class="string">'app/scripts/**/*.js'</span>)</div><div class="line">		.pipe(jshint())</div><div class="line">		.pipe(jshint.reporter(stylish));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'usemin'</span>, [<span class="string">'jshint'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> gulp.src(<span class="string">'./app/menu.html'</span>)</div><div class="line">		.pipe(usemin(&#123;</div><div class="line">			<span class="attr">css</span>:[minifycss(),rev()],</div><div class="line">			<span class="attr">js</span>: [uglify(),rev()]</div><div class="line">		&#125;))</div><div class="line">		.pipe(gulp.dest(<span class="string">'dist/'</span>));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'imagemin'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> del([<span class="string">'dist/images'</span>]), gulp.src(<span class="string">'app/images/**/*'</span>)</div><div class="line">		.pipe(cache(imagemin(&#123; <span class="attr">optimizationLevel</span>: <span class="number">3</span>, <span class="attr">progressive</span>: <span class="literal">true</span>, <span class="attr">interlaced</span>: <span class="literal">true</span> &#125;)))</div><div class="line">		.pipe(gulp.dest(<span class="string">'dist/images'</span>))</div><div class="line">		.pipe(notify(&#123; <span class="attr">message</span>: <span class="string">'Images task complete'</span> &#125;));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'clean'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> del([<span class="string">'dist'</span>])</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'copyfonts'</span>, [<span class="string">'clean'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	gulp.src(<span class="string">'./bower_components/font-awesome/fonts/**/*.&#123;ttf,woff,eof,svg&#125;*'</span>)</div><div class="line">		.pipe(gulp.dest(<span class="string">'./dist/fonts'</span>));</div><div class="line">	gulp.src(<span class="string">'./bower_components/bootstrap/dist/fonts/**/*.&#123;ttf,woff,eof,svg&#125;*'</span>)</div><div class="line">		.pipe(gulp.dest(<span class="string">'./dist/fonts'</span>));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'watch'</span>, [<span class="string">'browser-sync'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	gulp.watch(<span class="string">'&#123;app/scripts/**/*.js,app/styles/**/*.css,app/**/*.html&#125;'</span>, [<span class="string">'usemin'</span>]);</div><div class="line">	gulp.watch(<span class="string">'app/images/**/*'</span>, [<span class="string">'imagemin'</span>]);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'browser-sync'</span>, [<span class="string">'default'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> files = [</div><div class="line">		<span class="string">'app/**/*.html'</span>,</div><div class="line">		<span class="string">'app/styles/**/*.css'</span>,</div><div class="line">		<span class="string">'app/images/**/*.png'</span>,</div><div class="line">		<span class="string">'app/scripts/**/*.js'</span>,</div><div class="line">		<span class="string">'dist/**/*'</span></div><div class="line">	];</div><div class="line"></div><div class="line">	browserSync.init(files, &#123;</div><div class="line">		<span class="attr">server</span>: &#123;</div><div class="line">			<span class="attr">baseDir</span>: <span class="string">"dist"</span>,</div><div class="line">			<span class="attr">index</span>: <span class="string">"menu.html"</span></div><div class="line">		&#125;</div><div class="line">	&#125;);</div><div class="line"></div><div class="line">	gulp.watch([<span class="string">'dist/**'</span>]).on(<span class="string">'change'</span>, browserSync.reload);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'clean'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	gulp.start(<span class="string">'usemin'</span>, <span class="string">'imagemin'</span>, <span class="string">'copyfonts'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><hr><ul class="pager"><li class="previous"><a href="/2016/08/28/2016-08-28-frontend-javascript-framework-angularjs-week2-2/" data-toggle="tooltip" data-placement="top" title="[coursera] AngularJS week 2-2">&larr; Previous Post</a></li><li class="next"><a href="/2016/08/18/2016-08-18-frontend-javascript-framework-angularjs-week1/" data-toggle="tooltip" data-placement="top" title="[coursera] AngularJS week 1">Next Post &rarr;</a></li></ul><div class="comment"><div id="disqus_thread" class="disqus-thread"></div></div></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"><section><h5><a href="/tags/">FEATURED TAGS</a></h5><div class="tags"><a class="tag" href="/tags/#coursera" title="coursera">coursera</a> <a class="tag" href="/tags/#angularjs" title="angularjs">angularjs</a> <a class="tag" href="/tags/#javascript" title="javascript">javascript</a></div></section></div></div></div></article><script type="text/javascript">var disqus_shortname="bonogithub",disqus_identifier="http://blueshw.githup.io/2016/08/25/2016-08-25-frontend-javascript-framework-angularjs-week2-1/",disqus_url="http://blueshw.githup.io/2016/08/25/2016-08-25-frontend-javascript-framework-angularjs-week2-1/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script>function async(e,n){var t=document,a="script",r=t.createElement(a),c=t.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),c.parentNode.insertBefore(r,c)}</script><script>async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){anchors.options={visible:"always",placement:"right",icon:"#"},anchors.add().remove(".intro-header h1").remove(".subheading").remove(".sidebar-container h5")})</script><style>@media all and (min-width:800px){.anchorjs-link{position:absolute;left:-.75em;font-size:1.1em;margin-top:-.1em}}</style><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a target="_blank" href="https://www.facebook.com/blueshw"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" href="https://github.com/blueshw"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; 보노의 블로그 2017<br>Theme by <a href="http://huangxuan.me">Hux</a> <span style="display:inline-block;margin:0 5px"><i class="fa fa-heart"></i> </span>Ported by <a href="http://blog.kaijun.rocks">Kaijun</a> |<iframe style="margin-left:2px;margin-bottom:-5px" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true"></iframe></p></div></div></div></footer><script src="/js/jquery.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/hux-blog.min.js"></script><script>function async(e,n){var t=document,a="script",r=t.createElement(a),c=t.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),c.parentNode.insertBefore(r,c)}</script><script>0!==$("#tag_cloud").length&&async("http://blueshw.githup.io/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js",function(){var c=document.querySelector("nav");c&&FastClick.attach(c)})</script><script>var _gaId="UA-50048807-2",_gaDomain="blueshw.github.io";!function(e,a,n,t,g,o,c){e.GoogleAnalyticsObject=g,e[g]=e[g]||function(){(e[g].q=e[g].q||[]).push(arguments)},e[g].l=1*new Date,o=a.createElement(n),c=a.getElementsByTagName(n)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(o,c)}(window,document,"script",0,"ga"),ga("create",_gaId,_gaDomain),ga("send","pageview")</script><img src="http://blueshw.githup.io/img/icon_wechat.png" width="0" height="0"></body></html>