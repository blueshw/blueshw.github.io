<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content=""><meta name="keyword" content=""><link rel="shortcut icon" href="/img/favicon.ico"><title>[javascript] require vs import (CommonJs와 ES6) - 보노의블로그 | Bono&#39;s Blog</title><link rel="canonical" href="http://blueshw.githup.io/2017/05/16/ES-require-vs-import/"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/hux-blog.css"><link rel="stylesheet" href="/css/highlight.css"><link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--><script></script></head><body ontouchstart=""><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">보노의 블로그</a></div><div id="huxblog_navbar"><div class="navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/archives/">Archives</a></li><li><a href="/tags/">Tags</a></li></ul></div></div></div></nav><script>function handleMagic(e){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic)</script><style type="text/css">header.intro-header{background-image:url(/img/home-bg.jpg)}</style><header class="intro-header"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><div class="tags"><a class="tag" href="/tags/#javascript" title="javascript">javascript</a> <a class="tag" href="/tags/#ES6" title="ES6">ES6</a> <a class="tag" href="/tags/#require" title="require">require</a> <a class="tag" href="/tags/#import" title="import">import</a></div><h1>[javascript] require vs import (CommonJs와 ES6)</h1><h2 class="subheading"></h2><span class="meta">Posted by bono on 2017-05-16</span></div></div></div></div></header><article><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"><h2 id="CommonJs-AMD-ES6-Module"><a href="#CommonJs-AMD-ES6-Module" class="headerlink" title="CommonJs, AMD, ES6 Module"></a>CommonJs, AMD, ES6 Module</h2><p>require와 import에 대해서 비교해 보기 위해서는 우선 <a href="http://www.commonjs.org/" target="_blank" rel="external">CommonJs</a>와 <a href="https://github.com/amdjs/amdjs-api/wiki/AMD" target="_blank" rel="external">AMD(Asynchronous Module Definition)</a>, ES6 내장모듈과 같은 자바스크립트의 모듈 시스템에 대해 알고 있어야 합니다. 모듈에 대한 본격적인 포스팅이 아니기 때문에 깊게 다루진 않겠습니다(사실 자세히 모르게도 합니다ㅠ).</p><p>기존의 자바스크립트(ES5, 현재 대부분의 브라우저에서 지원하는 자바스크립트 문법)는 모듈이라는 개념이 부족하여 각 모듈(또는 파일)간의 의존성 처리에 제한이 있었습니다. 고전적인 웹 프로젝트에서 자바스크립트를 사용하는 방법을 살펴보면, HTML 파일내부에 <code>&lt;script&gt;</code> 태그를 삽입하여 모듈을 로드하고 있습니다. 하지만 이런 방식은 한가지 문제가 있는데, 자바스크립트 파일(또는 모듈)끼리 서로 모듈을 공유하는데 제약이 없다는점입니다. 그 이유는 script 태그로 로드된 모듈은 모두 window 객체의 속성이기 때문에 서로 다른 파일에 위치하면서도 모든 객체를 공유할 수 있기 때문입니다. 이처럼 각 자바스크립트 파일이 독립적으로 존재하지 못해 발생하는 여러 문제들(예를들어 다른 파일에서 같은 이름의 변수를 사용하는 경우) 때문에 하나의 모듈로 관리하기위한 다양한 패턴(모듈패턴, 즉시실행함수 등)을 사용하여 의존성을 관리할 수 밖에 없었습니다.</p><p>이를 해결하기 위한 수단으로 모듈이라는 개념을 도입하여 정의한 방법(또는 표준)이 CommonJs와 AMD입니다. 이 둘은 내부적으로 모듈 서로 간의 의존성(로드)이 지원되지 않는 상태로 만들어졌는데, ES6에 이르러 언어 내부적으로 자바스크립트 모듈 의존성을 지원하게 되었습니다(import, export).</p><h3 id="모듈정의-방식의-혼용"><a href="#모듈정의-방식의-혼용" class="headerlink" title="모듈정의 방식의 혼용"></a>모듈정의 방식의 혼용</h3><p>ES6 모듈은 기본적으로 CommonJs와 AMD 모듈을 혼용해서 사용할 수 있습니다. 모듈을 가져오는 부분에 require와 import를 같이 쓰더라도 문제없이 동작하죠. import는 ES6 문법이라 현재 사용되는 브라우저에서는 지원하지 않지만 babel과 같은 트랜스파일러가 해결해줄수 있습니다. AMD는 생략하고 ES6와 CommonJs를 비교하여 설명해보겠습니다.</p><p>모듈을 정의한다는 것은 다른 모듈에서 사용할 수 있도록 하나의 모듈로써 노출하겠다는 의미다.</p><h4 id="모듈-정의하기-export"><a href="#모듈-정의하기-export" class="headerlink" title="모듈 정의하기 (export)"></a>모듈 정의하기 (export)</h4><p><strong>ES6</strong></p><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 모듈 전체를 export, 파일내 한번만 사용가능하다.</span></div><div class="line"><span class="built_in">var</span> <span class="built_in">module</span> = &#123;&#125;;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="built_in">module</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 모든 속성을 export</span></div><div class="line"><span class="keyword">export</span> *;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 함수를 직접 export</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">moduleFunc</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"><span class="built_in">var</span> <span class="keyword">property</span><span class="string"> </span>= <span class="string">"some property"</span>;</div><div class="line"><span class="title">export</span> &#123;<span class="keyword">property</span><span class="string">&#125;</span>;</div></pre></td></tr></table></figure><p><strong>CommonJs</strong></p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 모듈 전체를 export</span></div><div class="line">module.<span class="keyword">exports</span> = module;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 모든 속성을 export</span></div><div class="line"><span class="comment">// (아시는 분 알려주세요) </span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 함수를 직접 export</span></div><div class="line"><span class="keyword">exports</span>.moduleFunc = <span class="function"><span class="keyword">function</span><span class="params">()</span> <span class="comment">&#123;&#125;</span>;</span></div></pre></td></tr></table></figure><h4 id="모듈-가져오기-import"><a href="#모듈-가져오기-import" class="headerlink" title="모듈 가져오기 (import)"></a>모듈 가져오기 (import)</h4><p><strong>ES6</strong></p><figure class="highlight elm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// 모듈 전체를 <span class="keyword">import</span></div><div class="line"><span class="keyword">import</span> module</div><div class="line"><span class="keyword">import</span> module <span class="keyword">as</span> myModule</div><div class="line"></div><div class="line"></div><div class="line">// 모든 속성 <span class="keyword">import</span></div><div class="line"><span class="keyword">import</span> * from module</div><div class="line"></div><div class="line"></div><div class="line">// 특정 멤버(함수 등)만 <span class="keyword">import</span></div><div class="line"><span class="keyword">import</span> &#123;moduleFunc, moduleFunc2&#125; from module</div></pre></td></tr></table></figure><p><strong>CommonJs</strong></p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> 모듈 전체를 <span class="keyword">import</span></div><div class="line">var <span class="built_in">module</span> = <span class="built_in">require</span>(<span class="string">'./someModule.js'</span>);</div><div class="line"></div><div class="line"><span class="regexp">//</span> 모든 속성 <span class="keyword">import</span></div><div class="line"><span class="regexp">//</span> (위의 <span class="built_in">module</span> 객체에 모든 속성이 담아져 온다.)</div><div class="line"></div><div class="line"><span class="regexp">//</span> 특정 멤버(함수 등)만 <span class="keyword">import</span>, 위의 <span class="built_in">module</span>을 이용한다.</div><div class="line"><span class="built_in">module</span>.moduleFunc</div></pre></td></tr></table></figure><h3 id="결론"><a href="#결론" class="headerlink" title="결론"></a>결론</h3><blockquote><p>바벨과 같은 트랜스파일링 모듈을 사용한다면 주저없이 ES6를 사용합니다.<br>혼용하는것도 가능하지만 가급적이면 통일되게 사용하는 것이 좋다고 생각합니다.<br>실제로 제가 프로젝트 진행하면서 mocha 테스트 중 ES6의 import/export와 CommonJs의 <code>module.exports</code> 를 혼용하여 사용시 문제가 발생했었습니다(자세히 언급하지 않음).</p></blockquote><h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><ul><li><a href="http://d2.naver.com/helloworld/12864" target="_blank" rel="external">JavaScript 표준을 위한 움직임: CommonJS와 AMD</a></li><li><a href="https://www.exratione.com/2015/12/es6-use-of-import-property-from-module-is-not-a-great-plan/" target="_blank" rel="external">ES6: Use of “import { property } from ‘module’” is Not a Great Plan</a></li></ul><hr><ul class="pager"><li class="next"><a href="/2017/04/12/javascript-closure/" data-toggle="tooltip" data-placement="top" title="[javascript] 클로저(closure)에 대해서 알아보자">Next Post &rarr;</a></li></ul><div class="comment"><div id="disqus_thread" class="disqus-thread"></div></div></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"><section><h5><a href="/tags/">FEATURED TAGS</a></h5><div class="tags"><a class="tag" href="/tags/#javascript" title="javascript">javascript</a> <a class="tag" href="/tags/#ES6" title="ES6">ES6</a> <a class="tag" href="/tags/#require" title="require">require</a> <a class="tag" href="/tags/#import" title="import">import</a></div></section></div></div></div></article><script type="text/javascript">var disqus_shortname="bonogithub",disqus_identifier="http://blueshw.githup.io/2017/05/16/ES-require-vs-import/",disqus_url="http://blueshw.githup.io/2017/05/16/ES-require-vs-import/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script>function async(e,n){var t=document,a="script",r=t.createElement(a),c=t.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),c.parentNode.insertBefore(r,c)}</script><script>async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){anchors.options={visible:"always",placement:"right",icon:"#"},anchors.add().remove(".intro-header h1").remove(".subheading").remove(".sidebar-container h5")})</script><style>@media all and (min-width:800px){.anchorjs-link{position:absolute;left:-.75em;font-size:1.1em;margin-top:-.1em}}</style><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a target="_blank" href="https://www.facebook.com/blueshw"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" href="https://github.com/blueshw"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; 보노의 블로그 2017<br>Theme by <a href="http://huangxuan.me">Hux</a> <span style="display:inline-block;margin:0 5px"><i class="fa fa-heart"></i> </span>Ported by <a href="http://blog.kaijun.rocks">Kaijun</a> |<iframe style="margin-left:2px;margin-bottom:-5px" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true"></iframe></p></div></div></div></footer><script src="/js/jquery.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/hux-blog.min.js"></script><script>function async(e,n){var t=document,a="script",r=t.createElement(a),c=t.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),c.parentNode.insertBefore(r,c)}</script><script>0!==$("#tag_cloud").length&&async("http://blueshw.githup.io/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js",function(){var c=document.querySelector("nav");c&&FastClick.attach(c)})</script><script>var _gaId="UA-50048807-2",_gaDomain="blueshw.github.io";!function(e,a,n,t,g,o,c){e.GoogleAnalyticsObject=g,e[g]=e[g]||function(){(e[g].q=e[g].q||[]).push(arguments)},e[g].l=1*new Date,o=a.createElement(n),c=a.getElementsByTagName(n)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(o,c)}(window,document,"script",0,"ga"),ga("create",_gaId,_gaDomain),ga("send","pageview")</script><img src="http://blueshw.githup.io/img/icon_wechat.png" width="0" height="0"></body></html>