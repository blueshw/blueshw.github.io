<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="R3ZeY1PmaJUY9j_cgNABjesJFgHWVCJpb4TsdfXntMA"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content=""><meta name="keyword" content=""><link rel="shortcut icon" href="/img/favicon2.ico"><link rel="canonical" href="http://blueshw.github.io/2018/09/15/pass-by-reference/"><title>[javascript] call by value - 보노의블로그 | Bono&#39;s Blog</title><link rel="canonical" href="http://blueshw.github.io/2018/09/15/pass-by-reference/"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/hux-blog.css?v=20180409"><link rel="stylesheet" href="/css/highlight.css"><link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--><script></script></head><body ontouchstart=""><nav class="navbar navbar-default navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">보노의 블로그</a></div><div id="huxblog_navbar"><div class="navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/archives/">Archives</a></li><li><a href="/tags/">Tags</a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");function handleMagic(e){0<$navbar.className.indexOf("in")?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}$toggle.addEventListener("click",handleMagic)</script><style type="text/css"></style><header class="intro-header"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><div class="tags"><a class="tag" href="/tags/#javascript" title="javascript">javascript</a> <a class="tag" href="/tags/#자바스크립트" title="자바스크립트">자바스크립트</a> <a class="tag" href="/tags/#call by value" title="call by value">call by value</a> <a class="tag" href="/tags/#call by reference" title="call by reference">call by reference</a> <a class="tag" href="/tags/#함수" title="함수">함수</a></div><h1>[javascript] call by value</h1><h2 class="subheading"></h2><span class="meta">Posted by bono on 2018-09-15</span></div></div></div></div></header><article><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"><p>의문은 아래와 같은 코드에서 시작되었습니다.</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">change</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  obj = &#123; <span class="attr">p1</span>: <span class="number">100</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> o = &#123; <span class="attr">p1</span>: <span class="number">1</span> &#125;;</span><br><span class="line">change(o);</span><br><span class="line"><span class="built_in">console</span>.log(o);</span><br></pre></td></tr></table></figure><p>객체를 매개변수로 받는 <code>change</code> 함수에 새롭게 만든 <code>o</code>객체를 인자로 전달하였습니다. 그리고 <code>change</code> 함수에서 obj 변수에 새로운 객체를 할당하였습니다. 과연 <code>o</code>는 어떤 값이 출력될까요?</p><h3 id="Call-By-Value"><a href="#Call-By-Value" class="headerlink" title="Call By Value"></a>Call By Value</h3><p>가끔 일하다보면, 정말 기초적인 부분에서 실수하는 경우가 있습니다. 최근에 저도 그랬습니다. 새로운 기술이나 도구 등을 익히는 것도 중요합니다만, 기본을 중요시하는 자세가 우선시해야 한다는걸 새삼 깨닫게 되었습니다. <code>Call By...</code>로 시작하는 함수 호출 방법도 기본중에 기본입니다. 언어에 따라서, 호출 방식에 따라서 인자가 평가되는 과정이 달라집니다. 언어를 익힐때 기본중에 기본이죠.</p><p>인자를 전달하는 방식에 따라 함수 호출 방법은 크게 두가지로 나눠집니다. <code>Call By Value</code>와 <code>Call By Reference</code>입니다. 그러면, 자바스크립트는 어떤 방식으로 함수를 호출할까요? 바로 <code>Call By Value</code>입니다. 흔히들 잘못 알고 있는 사실이 한가지 있습니다. 바로 함수의 매개변수가 원시타입(Primitive Type)인 경우에는 Call By Value고, 매개변수가 객체형태면 Call By Reference로 동작한다는 것입니다. 이는 완전히 잘못된 사실입니다. 블로그를 검색해보면, 이렇게 잘못된 사실을 바탕으로 쓰여진 글을 쉽게 찾아볼 수 있습니다.</p><h4 id="원시타입-Primitive-Type"><a href="#원시타입-Primitive-Type" class="headerlink" title="원시타입 (Primitive Type)"></a>원시타입 (Primitive Type)</h4><p>자바스크립트에는 5가지 원시타입이 있습니다. <code>boolean</code>, <code>number</code>, <code>string</code>, <code>null</code>, <code>undefined</code> 이렇게 다섯가지 입니다. 함수의 인자로 원시타입의 값이 전달되면, 함수가 실행될때 전달받은 인자를 복사합니다. 인자가 복사되었기 때문에 전달된 인자와 전달 받은 인자는 전혀 다른 값(주소값이 다른)이 됩니다. 코드로 확인해 보겠습니다.</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">change</span>(<span class="params">pri</span>) </span>&#123;</span><br><span class="line">  pri = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p = <span class="number">1</span>;</span><br><span class="line">change(p);</span><br><span class="line"><span class="built_in">console</span>.log(p); <span class="comment">// p = 1</span></span><br></pre></td></tr></table></figure><p>변수 <code>p</code>에 1이 할당된 다음, change함수의 인자로 p가 전달되었습니다. change 함수 내에서는 매개변수 <code>pri</code>에 10을 할당하여 값을 변경 시킵니다. change 함수가 호출된 이후 log를 찍어보면, p값은 change 함수가 호출되기 전과 동일하게 <code>1</code>이 됩니다. 즉, 처음 선언한 <code>p</code>와 change 함수로 전달한 인자는 별도의 값으로 존재한다는 뜻입니다.</p><h4 id="재할당-Reassigning-of-Reference-Type"><a href="#재할당-Reassigning-of-Reference-Type" class="headerlink" title="재할당 (Reassigning of Reference Type)"></a>재할당 (Reassigning of Reference Type)</h4><p>주소값을 직접 찍어볼 방법이 없기 때문에(있으면 좀 알려주세요^^;;), <code>===</code> 연산자로 참조값이 동일한지 비교해보도록 하겠습니다.</p><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">obj</span> = &#123; p1: <span class="number">10</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">objCopy</span> = obj;</span><br><span class="line">console.log(<span class="attr">obj</span> === objCopy); // <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">objCopy</span> = &#123; p2: <span class="number">100</span> &#125;;</span><br><span class="line">console.log(<span class="attr">obj</span> === objCopy); // <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>obj라는 객체를 선언합니다. 그리고 objCopy에 obj를 할당합니다. 좀더 자세히 알아보기 위해 임의의 주소값으로 표현해보겠습니다.</p><table><thead><tr><th style="text-align:left">변수</th><th style="text-align:left">값</th></tr></thead><tbody><tr><td style="text-align:left">obj</td><td style="text-align:left"><code>&lt;0x001&gt;</code></td></tr><tr><td style="text-align:left">objCopy</td><td style="text-align:left"><code>&lt;0x001&gt;</code></td></tr></tbody></table><table><thead><tr><th style="text-align:left">주소</th><th style="text-align:left">객체</th></tr></thead><tbody><tr><td style="text-align:left">0x001</td><td style="text-align:left">{ p1: 10 }</td></tr></tbody></table><p>objCopy는 obj와 동일한 객체를 가리키고 있습니다. 그래서 <code>===</code> 연산자로 비교해보면 서로 같다(true)고 출력됩니다.<br>그 다음, objCopy에 새로운 객체를 할당합니다. 그러면, 아래와 같이 바뀝니다.</p><table><thead><tr><th style="text-align:left">변수</th><th style="text-align:left">값</th></tr></thead><tbody><tr><td style="text-align:left">obj</td><td style="text-align:left"><code>&lt;0x001&gt;</code></td></tr><tr><td style="text-align:left">objCopy</td><td style="text-align:left"><code>&lt;0x002&gt;</code></td></tr></tbody></table><table><thead><tr><th style="text-align:left">주소</th><th style="text-align:left">객체</th></tr></thead><tbody><tr><td style="text-align:left">0x001</td><td style="text-align:left">{ p1: 10 }</td></tr><tr><td style="text-align:left">0x002</td><td style="text-align:left">{ p2: 100 }</td></tr></tbody></table><p>objCopy의 주소값이 변경되었습니다. objCopy는 원래 <code>0x001</code>라는 주소값을 value로 가지고 있었습니다. 그런데, 새로운 객체를 할당했더니 주소값이 변경되었습니다. 그 이유는 <code>{ p2: 100 }</code>이라는 객체는 새로운 주소로 만들어집니다. 그리고 기존에 잇던 objCopy라는 변수에 할당했으므로, 이제 objCopy는 <code>0x002</code> 주소값을 가리키게 되었습니다. 이해를 쉽게 하기 위해 코드를 조금 변형시켜보겠습니다.</p><figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line">let obj = &#123;p1: <span class="type">10</span>&#125;; <span class="comment">// obj 주소값 : 0x001</span></span><br><span class="line">let objCopy = obj; <span class="comment">// objCopy 주소값 : 0x001</span></span><br><span class="line">const <span class="keyword">new</span><span class="type">Obj</span> = &#123;p2: <span class="type">100</span>&#125;; <span class="comment">// newObj 주소값 : 0x002</span></span><br><span class="line">objCopy = <span class="keyword">new</span><span class="type">Obj</span>; <span class="comment">// objCopy 주소값 : 0x002</span></span><br></pre></td></tr></table></figure><p>newObj라는 새로운 객체가 objCopy에 할당되었으니 objCopy가 가리키는 주소값이 당연히 바뀌게 되는 것입니다. 애초에 객체타입(reference type)에 할당되는 값이 실제 객체가 아니라 객체를 가리키는 주소값이기 때문에 당연한 결과인지도 모르겠습니다.</p><h3 id="인자를-함수내에서-변경-속성만-변경-하면-어떻게-될까"><a href="#인자를-함수내에서-변경-속성만-변경-하면-어떻게-될까" class="headerlink" title="인자를 함수내에서 변경(속성만 변경)하면 어떻게 될까?"></a>인자를 함수내에서 변경(속성만 변경)하면 어떻게 될까?</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">change</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  obj.p1 = <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> o = &#123; <span class="attr">p1</span>: <span class="number">1</span> &#125;;</span><br><span class="line">change(o);</span><br><span class="line"><span class="built_in">console</span>.log(o);</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">변수</th><th style="text-align:left">값</th></tr></thead><tbody><tr><td style="text-align:left">o</td><td style="text-align:left"><code>&lt;0x001&gt;</code></td></tr><tr><td style="text-align:left">obj</td><td style="text-align:left"><code>&lt;0x001&gt;</code></td></tr></tbody></table><table><thead><tr><th style="text-align:left">주소</th><th style="text-align:left">객체</th></tr></thead><tbody><tr><td style="text-align:left">0x001</td><td style="text-align:left">{ p1: 1 }</td></tr></tbody></table><p>처음 할당된 <code>o</code> 객체의 주소값은 <code>0x001</code>입니다. change 함수를 호출되면 인자 o가 복사됩니다. 복사된 객체 obj는 o객체의 주소값을 갖는 새로운 변수가 됩니다(위의 표 참고). 즉, obj와 o 두가지 변수가 동일한 객체를 바라보고 있다는 뜻입니다. 그래서 obj 객체의 속성을 변경하면 객체 o의 속성도 변경됩니다.</p><p>그럼 이제 처음에 봤던 코드를 다시 한번 살펴보도록 합니다.</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">change</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  obj = &#123; <span class="attr">p1</span>: <span class="number">100</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> o = &#123; <span class="attr">p1</span>: <span class="number">1</span> &#125;;</span><br><span class="line">change(o);</span><br><span class="line"><span class="built_in">console</span>.log(o);</span><br></pre></td></tr></table></figure><p>log에 찍히는 값은 바로 <code>{ p1: 1 }</code>입니다. 위에서 보았던 <code>재할당</code>을 잘 기억하면서 위 코드의 주소값 변화를 살펴보겠습니다.</p><p>const o = { p1: 1 };</p><table><thead><tr><th style="text-align:left">변수</th><th style="text-align:left">값</th></tr></thead><tbody><tr><td style="text-align:left">o</td><td style="text-align:left"><code>&lt;0x001&gt;</code></td></tr></tbody></table><table><thead><tr><th style="text-align:left">주소</th><th style="text-align:left">객체</th></tr></thead><tbody><tr><td style="text-align:left">0x001</td><td style="text-align:left">{ p1: 1 }</td></tr></tbody></table><p>change(o)호출, 인자(주소값)가 복사됩니다.</p><table><thead><tr><th style="text-align:left">변수</th><th style="text-align:left">값</th></tr></thead><tbody><tr><td style="text-align:left">o</td><td style="text-align:left"><code>&lt;0x001&gt;</code></td></tr><tr><td style="text-align:left">obj</td><td style="text-align:left"><code>&lt;0x001&gt;</code></td></tr></tbody></table><table><thead><tr><th style="text-align:left">주소</th><th style="text-align:left">객체</th></tr></thead><tbody><tr><td style="text-align:left">0x001</td><td style="text-align:left">{ p1: 1 }</td></tr></tbody></table><p>change함수 내, obj = { p1: 100 };<br>| 변수 | 값 |<br>|:——|:——|<br>| o | <code>&lt;0x001&gt;</code> |<br>| obj | <code>&lt;0x002&gt;</code> |</p><table><thead><tr><th style="text-align:left">주소</th><th style="text-align:left">객체</th></tr></thead><tbody><tr><td style="text-align:left">0x001</td><td style="text-align:left">{ p1: 1 }</td></tr><tr><td style="text-align:left">0x002</td><td style="text-align:left">{ p1: 100 }</td></tr></tbody></table><p>마지막으로 <code>console.log(o)</code>에서 <code>{ p1: 1 }</code>가 출력됩니다. 즉, 객체가 바뀌지 않았습니다. 이유는 o 객체가 여전히 <code>0x001</code>을 가리키고 있기 때문입니다.</p><h3 id="정리"><a href="#정리" class="headerlink" title="정리"></a>정리</h3><p>자바스크립트에서 함수 호출시 <code>call by value</code>로 인자가 전달됩니다. call by value는 함수가 호출되면 전달한 인자가 복사됨을 뜻합니다. 인자가 복사되기 때문에 원시타입(primitive type)의 경우에는 함수 바깥의 변수와 서로 별개로 동작합니다. 하지만, array를 포함한 객체타입이 인자로 전달된 경우에는 변수에 할당되어 있는 <code>객체의 주소값</code>이 복사됩니다. 그래서 함수내에서 매개변수의 속성을 변경하면 함수 바깥에서도 동일하게 변경되는 것입니다. 그런데, 만약 함수내에서 매개변수가 <code>재할당</code>되었다면, 함수 바깥의 변수와 함수내 매개변수가 서로다른 객체를 바라보게 됩니다. 그래서 함수 내부에서 아무리 객체를 변형시키더라도 외부의 객체에 영향을 줄 수 없습니다.</p><h3 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h3><ul><li><a href="https://codeburst.io/explaining-value-vs-reference-in-javascript-647a975e12a0" rel="external nofollow noopener noreferrer" target="_blank">https://codeburst.io/explaining-value-vs-reference-in-javascript-647a975e12a0</a></li></ul><hr><ul class="pager"><li class="next"><a href="/2018/04/23/event-bubbling-capturing/" data-toggle="tooltip" data-placement="top" title="리액트(react)에서 이벤트 버블링(bubbling)과 캡쳐링(capturing) 사용하기">Next Post &rarr;</a></li></ul><div class="comment"><div id="disqus_thread" class="disqus-thread"></div></div></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"><section><h5><a href="/tags/">FEATURED TAGS</a></h5><div class="tags"><a class="tag" href="/tags/#javascript" title="javascript">javascript</a> <a class="tag" href="/tags/#자바스크립트" title="자바스크립트">자바스크립트</a> <a class="tag" href="/tags/#call by value" title="call by value">call by value</a> <a class="tag" href="/tags/#call by reference" title="call by reference">call by reference</a> <a class="tag" href="/tags/#함수" title="함수">함수</a></div></section></div></div></div></article><script type="text/javascript">var disqus_shortname="bonogithub",disqus_identifier="http://blueshw.github.io/2018/09/15/pass-by-reference/",disqus_url="http://blueshw.github.io/2018/09/15/pass-by-reference/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a target="_blank" href="https://twitter.com/blueshw" rel="external nofollow noopener noreferrer"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" href="https://www.facebook.com/blueshw" rel="external nofollow noopener noreferrer"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" href="https://github.com/blueshw" rel="external nofollow noopener noreferrer"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; 보노의 블로그 2018</p></div></div></div></footer><script src="/js/jquery.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/hux-blog.min.js"></script><script>function async(e,n){var t=document,a="script",r=t.createElement(a),c=t.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),c.parentNode.insertBefore(r,c)}</script><script>0!==$("#tag_cloud").length&&async("http://blueshw.github.io/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js",function(){var c=document.querySelector("nav");c&&FastClick.attach(c)})</script><script>var _gaId="UA-50048807-2",_gaDomain="blueshw.github.io";!function(a,e,g,n,t,o,c){a.GoogleAnalyticsObject="ga",a.ga=a.ga||function(){(a.ga.q=a.ga.q||[]).push(arguments)},a.ga.l=1*new Date,o=e.createElement(g),c=e.getElementsByTagName(g)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(o,c)}(window,document,"script"),ga("create",_gaId,_gaDomain),ga("send","pageview")</script><img src="http://blueshw.github.io/img/icon_wechat.png" width="0" height="0"></body></html>