{"data":{"site":{"siteMetadata":{"title":"bono's blog","author":"bono"}},"markdownRemark":{"id":"678bd268-554c-548b-9be7-9ed0eb092913","excerpt":"Task Runners, Angular Scope, Forms and Form Validation-1 Web Tools: Grunt and Gulp Task-Runners 웹개발을 하다보면 반복적으로 처리해야하는 태스크가 많이 있다. DRY(do…","html":"<h2>Task Runners, Angular Scope, Forms and Form Validation-1</h2>\n<h3>Web Tools: Grunt and Gulp</h3>\n<h4>Task-Runners</h4>\n<p>웹개발을 하다보면 반복적으로 처리해야하는 태스크가 많이 있다. DRY(do not repeat yourself) 원칙에 따라 태스크를 자동화하기 빌드툴을 사용할 필요가 있다.</p>\n<p>CSS 에서 보면 Sass 나 Less 로 컴파일하거나, 어떤 vender prefixes 를 추가하거나 Minification(spaces, newlines, comments 등의 불필요한 캐릭터 삭제)하거나 Concatenation 등의 반복적이 Tasks 가 있다.</p>\n<p>Javascript 의 경우에는, JSHint 를 이용한 자바스크립트 에러체킹이나 Concatenation, Uglification(minification + mangling(변수명 char 하나로 줄이기)) 등이 있겠다.</p>\n<p>이 외에도 Image 용량 최적화, 태스크 rerunning, 변경된 사항 반영하기 위한 server and Livereload, 파일 변경, 테스팅 등의 반복적인 태스크가 있다.</p>\n<p>위에서 살펴본 반복적인 태스크를 Grunt, Gulp 등의 Task Runners 를 이용해 자동화 할 수 있다.</p>\n<h3>Grunt</h3>\n<p>Grunt 는 configuration 기반의 태스크 러너이다. 우선 install 하자. -g 옵션을 주어 global 하게 사용할 수 있도록 한다.</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install&nbsp;-g&nbsp;grunt-cli</span></span></div></pre></div>\n<p>Grunt 의 설정팔일은 Gruntfile.js 로 정의한다. 대략적인 구조를 살펴보면 아래와 같다.\nfunction 의 argument 에 grunt 객체가 들어가고 그 아래에 필요한 코드를 추가한다. 자세한 내용은 차차 알아보자.</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>module.exports&nbsp;=&nbsp;function(grunt)&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t//&nbsp;do&nbsp;requires&nbsp;here</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\trequire(&#39;jit-grunt&#39;)(grunt);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t//&nbsp;do&nbsp;grunt&nbsp;task&nbsp;configurations&nbsp;here</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgrunt.initConfig({</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t});</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t//&nbsp;register&nbsp;tasks&nbsp;here</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgrunt.registerTask(&#39;build&#39;,&nbsp;[&#39;jshint&#39;]);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgrunt.registerTask(&#39;default&#39;,&nbsp;[&#39;build&#39;]);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>}</span></span></div></pre></div>\n<h4>File Globbing Patterns</h4>\n<p>Grunt 는 File Globbing Patterns 를 사용한다. File Globbing Patterns 이란 다음의 내용을 말한다.</p>\n<ul>\n<li>* 문자열, but not /</li>\n<li>? 문자 하나, but not /</li>\n<li>** 문자열 including /</li>\n<li>{} comma 로 or 를 표현함</li>\n<li>! 패턴매치가 negative 함</li>\n</ul>\n<p>몇가지 예제를 살펴보자\n우선 jshint 와 jshint-stylish 모듈을 install 한다.\njshint 는 자바스크립트의 문법을 체크해주는 모듈이다. 세미콜론이 빠졌거나, 괄호가 빠져 있는것 처럼 문법오류나 개선할 부분이 필요한 것을 체크해준다. jshint-stylish 는 jshint 의 메세지를 좀 더 잘 보여주기 위한 스타일을 제공하는 모듈이다.</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install&nbsp;grunt-contrib-jshint&nbsp;--save-dev</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install&nbsp;jshint-stylish&nbsp;--save-dev</span></span></div></pre></div>\n<p>그리고 Configuration 을 다음과 같이 작성하자.\nConfiguration 파일은 프로젝트 root 폴더에서 Gruntfile.js 를 만들어 아래 내용을 저장한다.</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>jshint:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\toptions:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tjshintrc:&nbsp;&#39;.jshintrc&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\treporter:&nbsp;require(&#39;jshint-stylish&#39;)</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tall:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t//&nbsp;실제&nbsp;체크할&nbsp;자바스크립트&nbsp;파일의&nbsp;경로를&nbsp;지정한다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t//&nbsp;Gruntfile.js와&nbsp;app/scripts의&nbsp;모든&nbsp;.js&nbsp;파일을&nbsp;검사하겠다는&nbsp;의미다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tsrc:&nbsp;[&#39;Gruntfile.js&#39;,&nbsp;&#39;app/scripts/{,*/}*.js&#39;]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>}</span></span></div></pre></div>\n<p>설정파일은 자바스크립트 객체 형식으로 구성된다. options 는 jshint 설정파일과 그외 포맷을 위한 style 모듈이 reporter 로 정의되어 있다. hshintrc 는 jshint 설정파일이다. all 부분은 jshint 를 적용할 자바스크트 파일을 Globbing 패턴으로 지정하였다.</p>\n<h4>Greating a Distribution Folder</h4>\n<p>수많은 Grunt 관련 모듈과 css, js 파일들을 설치함으로써 프로젝트 구성이 점점 복잡해지고 있다. 그래서 Distribution Folder 를 만들어 꼭 필요한 모듈만 이용하는 웹사이트를 만들어 보자.</p>\n<p>다음의 모듈을 설치한다.\nglobal(-g) 옵션이 없는 설치는 local 설치이므로 모듈을 사용할 프로젝트 디렉토리에서 실행한다.</p>\n<h4>usemin module</h4>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>//&nbsp;조건에&nbsp;맞는&nbsp;모든&nbsp;파일을&nbsp;원하는&nbsp;폴더(여기서는&nbsp;dist)로&nbsp;복사한다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install&nbsp;grunt-contrib-copy&nbsp;--save-dev</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>//&nbsp;해당&nbsp;폴더의&nbsp;clean&nbsp;out&nbsp;한다.&nbsp;rebuild를&nbsp;위한&nbsp;초반&nbsp;작업이다.&nbsp;그렇기&nbsp;때문에&nbsp;가장&nbsp;먼저&nbsp;실행해야한다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install&nbsp;grunt-contrib-clean&nbsp;--save-dev</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>//&nbsp;js,&nbsp;css&nbsp;파일들을&nbsp;하나로&nbsp;합쳐준다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install&nbsp;grunt-contrib-concat&nbsp;--save-dev</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>//&nbsp;css&nbsp;파일&nbsp;minification</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install&nbsp;grunt-contrib-cssmin&nbsp;--save-dev</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>//&nbsp;자바스크립트&nbsp;변수를&nbsp;문자열&nbsp;=&gt;&nbsp;문자로&nbsp;변경한다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install&nbsp;grunt-contrib-uglify&nbsp;--save-dev</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>//&nbsp;minification한&nbsp;뒤,&nbsp;css,&nbsp;js&nbsp;파일을&nbsp;버전업한다.&nbsp;(브라우저&nbsp;캐싱&nbsp;대비)</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>//&nbsp;해싱&nbsp;알고리즘과&nbsp;length등을&nbsp;선택할&nbsp;수&nbsp;있다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;insatll&nbsp;grunt-filerev&nbsp;--save-dev</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>//&nbsp;css,&nbsp;js&nbsp;파일을&nbsp;minification&nbsp;해준다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>//&nbsp;useminPrepare&nbsp;-&gt;&nbsp;concat&nbsp;-&gt;&nbsp;cssmin&nbsp;-&gt;&nbsp;uglify&nbsp;-&gt;&nbsp;filerev&nbsp;-&gt;&nbsp;usemin의&nbsp;순서로&nbsp;태스크가&nbsp;진행된다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;insatll&nbsp;grunt-usemin&nbsp;--save-dev</span></span></div></pre></div>\n<p>usemin 은 js, css 파이릉 minification 하기 위한 모듈이다. usemin 은 독자적으로 동작하지 않고 여러가지 모듈을 거쳐가는데 대체로 다음과 같다.</p>\n<blockquote>\n<p>useminPrepare -> concat -> cssmin -> uglify -> filerev -> usemin</p>\n</blockquote>\n<p>우선 useminPrepare 는 html 주석 처리된 부분을 기준으로 css, js 각각의 하나의 파일로 합치기 위한 준비를 한다. concat 을 통해 css, js 파일들을 각각 하나로 합쳐준다. 그리고 cssmin, uglify 모듈을 통해 css, js 파일을 minification 하고 filerev 로 버전관리를 한다. 마지막으로 usemin 이 html 파일에 이전의 모든 모듈이 행한 결과를 반영한다.</p>\n<h4>watch</h4>\n<p>original 파일의 변경이 발생하였을때 rerun 하기 위한 모듈이다.\n설정된 모든 파일중에 하나라도 변경이 일어나면 즉시 reload 한다.\nreload 는 모든 파일들을 복사하는것과 같다고 보면 된다.\n그런데, js, css 파일들은 copy 를 예외처리하는데, usemin 모듈에서 먼저 빌드처리 되기 때문에 watch 에서는 제외된다.</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install&nbsp;grunt-contrib-watch&nbsp;--save-dev</span></span></div></pre></div>\n<h4>connect</h4>\n<p>브라우저에서 dist 폴더의 특정 html 파일(보통 index.html)이 실행되도록 한다.\nwatch 모듈과 같이 사용하면 이렇게 사용할 수 있다.</p>\n<blockquote>\n<p>파일 변경 -> livereload (build and copy) -> open(update) browse</p>\n</blockquote>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install&nbsp;grunt-contlib-connect&nbsp;--save-dev</span></span></div></pre></div>\n<h4>Gruntfile.js</h4>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&#39;use&nbsp;strict&#39;;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>module.exports&nbsp;=&nbsp;function&nbsp;(grunt)&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\trequire(&#39;time-grunt&#39;)(grunt);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\trequire(&#39;jit-grunt&#39;)(grunt,&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tuseminPrepare:&nbsp;&#39;grunt-usemin&#39;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t});</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgrunt.initConfig({</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tpkg:&nbsp;grunt.file.readJSON(&#39;package.json&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tjshint:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\toptions:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tjshintrc:&nbsp;&#39;.jshintrc&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\treporter:&nbsp;require(&#39;jshint-stylish&#39;)</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tall:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tsrc:&nbsp;[</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t&#39;Gruntfile.js&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t&#39;app/scripts/{,*/}*.js&#39;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tuseminPrepare:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\thtml:&nbsp;&#39;app/menu.html&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\toptions:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tdest:&nbsp;&#39;dist&#39;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tconcat:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\toptions:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tseparator:&nbsp;&#39;;&#39;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tdist:&nbsp;{}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tuglify:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tdist:&nbsp;{}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tcssmin:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tdist:&nbsp;{}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tfilerev:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\toptions:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tencoding:&nbsp;&#39;utf8&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\talgorithm:&nbsp;&#39;md5&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tlength:&nbsp;20</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\trelease:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tfiles:&nbsp;[{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\tsrc:&nbsp;[</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\t&#39;dist/scripts/*js&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\t&#39;dist/styles/*.css&#39;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t}]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tusemin:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\thtml:&nbsp;[&#39;dist/*.html&#39;],</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tcss:&nbsp;[&#39;dist/styles/*.css&#39;],</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\toptions:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tassetsDirs:&nbsp;[&#39;dist&#39;,&nbsp;&#39;dist/styles&#39;]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tcopy:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tdist:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tcwd:&nbsp;&#39;app&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tsrc:&nbsp;[&#39;**&#39;,&nbsp;&#39;!styles/**/*.css&#39;,&nbsp;&#39;!scripts/**/*.js&#39;],</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tdest:&nbsp;&#39;dist&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\texpand:&nbsp;true</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tfonts:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tfiles:[</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\texpand:&nbsp;true,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\tdot:&nbsp;true,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\tcwd:&nbsp;&#39;bower_components/bootstrap/dist&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\tsrc:&nbsp;[&#39;fonts/*.*&#39;],</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\tdest:&nbsp;&#39;dist&#39;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t},&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\texpand:&nbsp;true,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\tdot:&nbsp;true,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\tcwd:&nbsp;&#39;bower_components/font-awesome&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\tsrc:&nbsp;[&#39;fonts/*.*&#39;],</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\tdest:&nbsp;&#39;dist&#39;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\twatch:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tcopy:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tfiles:&nbsp;[&#39;app/**&#39;,&nbsp;&#39;!app/**/*.css&#39;,&nbsp;&#39;!app/**/*.js&#39;],</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\ttasks:&nbsp;[&#39;build&#39;]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tscripts:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tfiles:&nbsp;[&#39;app/scripts/app.js&#39;],</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\ttasks:&nbsp;[&#39;build&#39;]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tstyles:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tfiles:&nbsp;[&#39;app/styles/mystyles.css&#39;],</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\ttasks:[&#39;build&#39;]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tlivereload:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\toptions:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\tlivereload:&nbsp;&#39;&lt;%=&nbsp;connect.options.livereload&nbsp;%&gt;&#39;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tfiles:&nbsp;[</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t&#39;app/{,*/}*.html&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t&#39;.tmp/styles/{,*/}*.css&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t&#39;app/images/{,*/}*.{png,jpg,jpeg,gif,webp,svg}&#39;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tconnect:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\toptions:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tport:&nbsp;9000,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\thostname:&nbsp;&#39;localhost&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tlivereload:&nbsp;35729</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tdist:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\toptions:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\topen:&nbsp;true,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\tbase:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\tpath:&nbsp;&#39;dist&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\toptions:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\t\tindex:&nbsp;&#39;menu.html&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\t\tmaxAge:&nbsp;300000</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t},</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tclean:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tbuild:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t\tsrc:&nbsp;[&#39;dist/&#39;]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t});</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t//&nbsp;태스크&nbsp;등록</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t//&nbsp;순서가&nbsp;중요하다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t//&nbsp;jshint로&nbsp;모든&nbsp;.js&nbsp;파일을&nbsp;검사하게&nbsp;된다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgrunt.registerTask(&#39;build&#39;,&nbsp;[</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;clean&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;jshint&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;useminPrepare&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;concat&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;cssmin&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;uglify&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;copy&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;filerev&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;usemin&#39;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t]);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t//&nbsp;순서가&nbsp;중요하다.&nbsp;먼저&nbsp;build,&nbsp;다음에는&nbsp;브라우져&nbsp;오픈,&nbsp;watch</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t//&nbsp;watch가&nbsp;마지막에&nbsp;실행되므로,&nbsp;파일&nbsp;변경을&nbsp;감지하면&nbsp;build,&nbsp;브라우저&nbsp;오픈,&nbsp;다시&nbsp;watch&nbsp;와&nbsp;같은&nbsp;순서로&nbsp;진행된다.</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgrunt.registerTask(&#39;serve&#39;,&nbsp;[&#39;build&#39;,&#39;connect:dist&#39;,&#39;watch&#39;]);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgrunt.registerTask(&#39;default&#39;,&nbsp;[&#39;build&#39;]);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>};</span></span></div></pre></div>\n<h3>Gulp</h3>\n<p>Grunt 는 Configuration 기반의 태스크 러너였다면, 반대로 Gulp 는 코드 기반의 태스크 러너 이다. Gulp 는 Grunt 처럼 태스크를 실행하기 위한 중간 파일을 만들지 않고 NodeJS streams 을 사용하여 복잡한 파이프라인 형태로 실행된다(무슨 말이지는 잘 모르겠지만, 예제를 보면 알겠지).</p>\n<p>일단 global 로 설치하자.</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install&nbsp;-g&nbsp;gulp</span></span></div></pre></div>\n<p>Grunt 예제와 비슷하게 동작하는 예제를 실행하기 위해 다음과 같은 plugins 을 설치한다.</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>npm&nbsp;install</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp-jshint&nbsp;jshint-stylish</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp-imagemin&nbsp;gulp-concat&nbsp;gulp-uglify&nbsp;gulp-minify-css&nbsp;gulp-usemin</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp-cache&nbsp;gulp-rev&nbsp;gulp-rename&nbsp;gulp-notify</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tbrowser-sync&nbsp;del</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>--save-dev</span></span></div></pre></div>\n<p>플러그인을 로드하는 방법은 다음과 같다.\n직접 각 플러그인을 로드해도 되지만, package.json 파일 형태로 저장할 수도 있다.</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>var&nbsp;gulp&nbsp;=&nbsp;require(&#39;gulp&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;&nbsp;jshint&nbsp;=&nbsp;require(&#39;gulp-jshint&#39;)</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;&nbsp;sylish&nbsp;=&nbsp;require(&#39;jshint-stylish&#39;)</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;&nbsp;...</span></span></div></pre></div>\n<h4>Gulp Streams</h4>\n<p>Gulp Streams 는 nodeJS streams 를 사용하여 파이프라인을 구성하는데, 파이프 라인이란 하나의 function 의 결과가 다음 function 으로 그대로 전달되는 연쇄적인 명령셋을 말한다. 예제를 살펴보자</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>gulp.task(&#39;jshint&#39;,&nbsp;function()&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp.src(&#39;app/scripts/**/*.js&#39;)</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t.pipe(jshint())</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t.pipe(jshint.reporter(stylish));</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>});</span></span></div></pre></div>\n<p>우선 걸프 태스크를 생성하고 그 안에서 소스를 선택하고 jshint 를 생성하고 스타일을 적용해주는 일련의 명령들을 pipe 라는 function 을 이용하여 연결하였다.</p>\n<p>Watch 태스크 예제를 살펴보자</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>gulp.task(&#39;watch&#39;,&nbsp;[&#39;browser-sync&#39;],&nbsp;function()&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp.watch(&#39;{app/scripts/**/*.js,&nbsp;app/style/**/*.css,&nbsp;app/**/*.html}&#39;,&nbsp;[&#39;usemin&#39;]);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp.watch(&#39;app/images/**/*&#39;,&nbsp;[&#39;imagemin&#39;]);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>});</span></span></div></pre></div>\n<p>태스크의 두번째 인자를 보면, browser-sync 가 대괄호로 묶여져 있다. 이 의미는 browser-sync 는 watch 태스크에 종속적이라는 말이다. 즉, watch 태스크가 실행되면 자동으로 browser-sync 가 실행된다.</p>\n<h4>Default Task</h4>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>gulp.task(&#39;default&#39;,&nbsp;[&#39;clean&#39;],&nbsp;function()&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp.start(&#39;usemin&#39;,&nbsp;&#39;imagemin&#39;,&nbsp;&#39;copyfonts&#39;);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>});</span></span></div></pre></div>\n<p>default 태스크는 콘솔창에서 gulp 라고 입력하면 실행되는 태스크이다. clean 태스크가 연쇄적으로 발생하게 되고, 내부에서는 서로 dependency 가 없는 usemin, imagemin, copyfonts 가 동시에 실행된다.</p>\n<h4>gulpfile.js</h4>\n<p>콤마(,)와 띄어쓰기에 유의해야 한다.</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>var&nbsp;gulp&nbsp;=&nbsp;require(&#39;gulp&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tminifycss&nbsp;=&nbsp;require(&#39;gulp-minify-css&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tjshint&nbsp;=&nbsp;require(&#39;gulp-jshint&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tstylish&nbsp;=&nbsp;require(&#39;jshint-stylish&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tuglify&nbsp;=&nbsp;require(&#39;gulp-uglify&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tusemin&nbsp;=&nbsp;require(&#39;gulp-usemin&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\timagemin&nbsp;=&nbsp;require(&#39;gulp-imagemin&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\trename&nbsp;=&nbsp;require(&#39;gulp-rename&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tconcat&nbsp;=&nbsp;require(&#39;gulp-concat&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tnotify&nbsp;=&nbsp;require(&#39;gulp-notify&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tcache&nbsp;=&nbsp;require(&#39;gulp-cache&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tchanged&nbsp;=&nbsp;require(&#39;gulp-changed&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\trev&nbsp;=&nbsp;require(&#39;gulp-rev&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tbrowserSync&nbsp;=&nbsp;require(&#39;browser-sync&#39;),</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tdel&nbsp;=&nbsp;require(&#39;del&#39;);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>gulp.task(&#39;jshint&#39;,&nbsp;function()&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\treturn&nbsp;gulp.src(&#39;app/scripts/**/*.js&#39;)</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t.pipe(jshint())</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t.pipe(jshint.reporter(stylish));</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>});</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>gulp.task(&#39;usemin&#39;,&nbsp;[&#39;jshint&#39;],&nbsp;function()&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\treturn&nbsp;gulp.src(&#39;./app/menu.html&#39;)</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t.pipe(usemin({</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tcss:[minifycss(),rev()],</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tjs:&nbsp;[uglify(),rev()]</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t}))</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t.pipe(gulp.dest(&#39;dist/&#39;));</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>});</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>gulp.task(&#39;imagemin&#39;,&nbsp;function()&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\treturn&nbsp;del([&#39;dist/images&#39;]),&nbsp;gulp.src(&#39;app/images/**/*&#39;)</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t.pipe(cache(imagemin({&nbsp;optimizationLevel:&nbsp;3,&nbsp;progressive:&nbsp;true,&nbsp;interlaced:&nbsp;true&nbsp;})))</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t.pipe(gulp.dest(&#39;dist/images&#39;))</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t.pipe(notify({&nbsp;message:&nbsp;&#39;Images&nbsp;task&nbsp;complete&#39;&nbsp;}));</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>});</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>gulp.task(&#39;clean&#39;,&nbsp;function()&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\treturn&nbsp;del([&#39;dist&#39;])</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>});</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>gulp.task(&#39;copyfonts&#39;,&nbsp;[&#39;clean&#39;],&nbsp;function()&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp.src(&#39;./bower_components/font-awesome/fonts/**/*.{ttf,woff,eof,svg}*&#39;)</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t.pipe(gulp.dest(&#39;./dist/fonts&#39;));</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp.src(&#39;./bower_components/bootstrap/dist/fonts/**/*.{ttf,woff,eof,svg}*&#39;)</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t.pipe(gulp.dest(&#39;./dist/fonts&#39;));</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>});</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>gulp.task(&#39;watch&#39;,&nbsp;[&#39;browser-sync&#39;],&nbsp;function()&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp.watch(&#39;{app/scripts/**/*.js,app/styles/**/*.css,app/**/*.html}&#39;,&nbsp;[&#39;usemin&#39;]);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp.watch(&#39;app/images/**/*&#39;,&nbsp;[&#39;imagemin&#39;]);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>});</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>gulp.task(&#39;browser-sync&#39;,&nbsp;[&#39;default&#39;],&nbsp;function()&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tvar&nbsp;files&nbsp;=&nbsp;[</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;app/**/*.html&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;app/styles/**/*.css&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;app/images/**/*.png&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;app/scripts/**/*.js&#39;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t&#39;dist/**/*&#39;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t];</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tbrowserSync.init(files,&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\tserver:&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tbaseDir:&nbsp;&quot;dist&quot;,</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t\tindex:&nbsp;&quot;menu.html&quot;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t\t}</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\t});</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp.watch([&#39;dist/**&#39;]).on(&#39;change&#39;,&nbsp;browserSync.reload);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>});</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>gulp.task(&#39;default&#39;,&nbsp;[&#39;clean&#39;],&nbsp;function()&nbsp;{</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>\tgulp.start(&#39;usemin&#39;,&nbsp;&#39;imagemin&#39;,&nbsp;&#39;copyfonts&#39;);</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>});</span></span></div></pre></div>","frontmatter":{"title":"[coursera] AngularJS week 2-1","date":"August 25, 2016"}}},"pageContext":{"slug":"/2016/08/25/frontend-javascript-framework-angularjs-week2-1/","previous":{"fields":{"slug":"/2016/08/18/frontend-javascript-framework-angularjs-week1/"},"frontmatter":{"title":"[coursera] AngularJS week 1"}},"next":{"fields":{"slug":"/2016/08/28/frontend-javascript-framework-angularjs-week2-2/"},"frontmatter":{"title":"[coursera] AngularJS week 2-2"}}}}